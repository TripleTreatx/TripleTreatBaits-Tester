<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dein TripleTreat Baits Testpaket</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1a1a1a; /* Darker background */
            color: #e0e0e0; /* Lighter text for dark mode */
        }
        h1, h2 {
            color: #00bcd4; /* Turquoise for headings */
        }
        .container {
            max-width: 900px;
            margin: auto;
            background: #2a2a2a; /* Darker container background */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5); /* More prominent shadow for dark mode */
        }
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        .logo img {
            max-width: 200px; /* Adjust as needed */
            height: auto;
        }
        .bait-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .bait-item {
            border: 1px solid #444; /* Darker border */
            border-radius: 5px;
            padding: 10px;
            text-align: center;
            background-color: #333; /* Darker item background */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .bait-item:hover {
            box-shadow: 0 0 10px rgba(0, 188, 212, 0.6); /* Turquoise shadow on hover */
        }
        .bait-item.selected {
            border-color: #00bcd4; /* Turquoise border when selected */
            box-shadow: 0 0 12px rgba(0, 188, 212, 0.8); /* Stronger turquoise shadow */
            background-color: #3b5055; /* Slightly lighter dark for selected */
        }
        .bait-item img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin-bottom: 5px;
        }
        .bait-item p {
            font-size: 0.9em;
            font-weight: bold;
            color: #e0e0e0; /* Lighter text */
        }
        .form-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #444; /* Darker border */
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input[type="text"] {
            width: calc(100% - 22px);
            padding: 10px;
            border: 1px solid #555; /* Darker input border */
            border-radius: 4px;
            box-sizing: border-box;
            background-color: #333; /* Darker input background */
            color: #e0e0e0; /* Lighter input text */
        }
        button {
            background-color: #00bcd4; /* Turquoise button */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease-in-out;
        }
        button:hover {
            background-color: #0097a7; /* Darker turquoise on hover */
        }
        .message-box {
            display: none;
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #00bcd4; /* Turquoise border */
            background-color: #3b5055; /* Slightly lighter dark for message box */
            border-radius: 8px;
            text-align: center;
        }
        .message-box p {
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #e0e0e0;
        }
        .message-box a {
            color: #00bcd4; /* Turquoise link */
            text-decoration: none;
            font-weight: bold;
        }
        .message-box a:hover {
            text-decoration: underline;
        }
        .error-message {
            color: #ff6666; /* Red for errors */
            font-size: 0.9em;
            margin-top: -10px;
            margin-bottom: 10px;
            display: none;
        }

        /* Styles for the welcome screen */
        .welcome-screen {
            text-align: center;
            padding: 50px 20px;
        }
        .welcome-screen h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        .welcome-screen p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        .welcome-screen button {
            padding: 15px 30px;
            font-size: 1.2em;
        }

        /* Utility classes to hide/show sections */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <img src="image/Logo.png" alt="Firmenlogo">
        </div>

        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="welcome-screen">
            <h1>Herzlichen Gl√ºckwunsch!</h1>
            <p>
                Ich habe dich als Tester f√ºr meine TripleTreat Baits Trinity 3,5" ausgew√§hlt und freue mich auf dein ehrliches 	Feedback! Mich interessiert, wie dir die K√∂der gefallen und wie sie sich beim Angeln machen.
            </p>
            <p>
                Klicke auf "Weiter", um deine vier Lieblingsfarben auszuw√§hlen und deine Versanddaten einzugeben.
            </p>
            <button id="startButton">Weiter</button>
        </div>

        <!-- Main Form Content (initially hidden) -->
        <div id="mainContent" class="hidden">
            <h1>W√§hle deine Lieblingsfarben</h1>
            <p>W√§hle bitte <strong>vier</strong> deiner Lieblingsfarben aus der Liste unten aus:</p>
            <div class="error-message" id="selection-error">Bitte w√§hle genau vier K√∂der aus.</div>

            <div class="bait-grid" id="bait-selection-grid">
                <!-- K√∂derbilder werden hier dynamisch eingef√ºgt -->
            </div>

            <div class="form-section">
                <h2>Deine Daten</h2>
                <form id="user-info-form">
                    <div class="form-group">
                        <label for="firstName">Vorname:</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Nachname:</label>
                        <input type="text" id="lastName" name="lastName" required>
                    </div>
                    <div class="form-group">
                        <label for="street">Stra√üe & Hausnummer:</label>
                        <input type="text" id="street" name="street" required>
                    </div>
                    <div class="form-group">
                        <label for="city">Ort:</label>
                        <input type="text" id="city" name="city" required>
                    </div>
                    <div class="form-group">
                        <label for="zipCode">Postleitzahl:</label>
                        <input type="text" id="zipCode" name="zipCode" pattern="[0-9]{5}" title="Bitte gib eine g√ºltige 5-stellige Postleitzahl ein" required>
                    </div>
                    <button type="submit">Absenden</button>
                </form>
            </div>
        </div> <!-- End of mainContent -->

        <div class="message-box" id="thank-you-message">
          <h2>Vielen Dank f√ºr deine Teilnahme!</h2>
          <p>Deine Auswahl und deine Daten wurden erfolgreich √ºbermittelt.</p>
          <p>
            Mir ist wichtig, dass du Spa√ü am Testen hast ‚Äì dein Feedback z√§hlt!
            Wenn du mich dar√ºber hinaus mit einer kleinen freiwilligen Spende √ºber PayPal
            unterst√ºtzen m√∂chtest, freue ich mich riesig. Aber klar: Das ist absolut kein Muss.
          </p>
          <a href="https://www.paypal.com/paypalme/3DDruckTripleTreat" target="_blank" class="paypal-btn">
            üíô Jetzt freiwillig via PayPal unterst√ºtzen
          </a>
        </div>
    </div>

   <script>
    const baits = [
        { id: 1, name: "Amber Sunset", imageUrl: "image/Amber Sunset.png" },
        { id: 2, name: "Black Fire", imageUrl: "image/Black Fire.png" },
        { id: 3, name: "Candy Pink", imageUrl: "image/Candy Pink.png" },
        { id: 4, name: "Firetiger Lite", imageUrl: "image/Firetiger Lite.png" },
        { id: 5, name: "Golden Shine", imageUrl: "image/Golden Shine.png" },
        { id: 6, name: "Green Pumpkin", imageUrl: "image/Green Pumpkin.png" },
        { id: 7, name: "Ice Blue", imageUrl: "image/Ice Blue.png" },
        { id: 8, name: "Inferno Red", imageUrl: "image/Inferno Red.png" },
        { id: 9, name: "Lime Burst", imageUrl: "image/Lime Burst.png" },
        { id: 10, name: "Midnight", imageUrl: "image/Midnight.png" },
        { id: 11, name: "Motoroil", imageUrl: "image/Motoroil.png" },
        { id: 12, name: "Mystic Oil", imageUrl: "image/Mystic Oil.png" },
        { id: 13, name: "Natural Flame", imageUrl: "image/Natural Flame.png" },
        { id: 14, name: "Pumpkin Spice", imageUrl: "image/Pumpkin Spice.png" },
        { id: 15, name: "Salt & Pepper", imageUrl: "image/Salt & Pepper.png" },
        { id: 16, name: "Snowflake", imageUrl: "image/Snowflake.png" }
    ];

    const welcomeScreen = document.getElementById('welcomeScreen');
    const mainContent = document.getElementById('mainContent');
    const startButton = document.getElementById('startButton');

    const baitGrid = document.getElementById('bait-selection-grid');
    const userInfoForm = document.getElementById('user-info-form');
    const thankYouMessage = document.getElementById('thank-you-message');
    const selectionError = document.getElementById('selection-error');
    let selectedBaits = [];

    // Event Listener f√ºr den "Weiter" Button
    startButton.addEventListener('click', () => {
        welcomeScreen.classList.add('hidden'); // Willkommensseite ausblenden
        mainContent.classList.remove('hidden'); // Hauptinhalt einblenden
    });


    // K√∂der dynamisch zur Seite hinzuf√ºgen
    baits.forEach(bait => {
        const baitItem = document.createElement('div');
        baitItem.classList.add('bait-item');
        baitItem.dataset.id = bait.id;
        baitItem.innerHTML = `
            <img src="${bait.imageUrl}" alt="${bait.name}">
            <p>${bait.name}</p>
        `;
        baitItem.addEventListener('click', () => toggleBaitSelection(baitItem));
        baitGrid.appendChild(baitItem);
    });

    function toggleBaitSelection(item) {
        const baitId = parseInt(item.dataset.id);

        if (item.classList.contains('selected')) {
            item.classList.remove('selected');
            selectedBaits = selectedBaits.filter(id => id !== baitId);
        } else {
            if (selectedBaits.length < 4) {
                item.classList.add('selected');
                selectedBaits.push(baitId);
            } else {
                alert('Du kannst maximal 4 K√∂der ausw√§hlen.');
            }
        }
        // Fehleranzeige aktualisieren
        if (selectedBaits.length !== 4) {
            selectionError.style.display = 'block';
        } else {
            selectionError.style.display = 'none';
        }
    }

    userInfoForm.addEventListener('submit', function(event) {
        event.preventDefault(); // Verhindert das Neuladen der Seite

        if (selectedBaits.length !== 4) {
            selectionError.style.display = 'block';
            selectionError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            return;
        } else {
            selectionError.style.display = 'none';
        }

        const formData = {
            firstName: document.getElementById('firstName').value,
            lastName: document.getElementById('lastName').value,
            street: document.getElementById('street').value,
            city: document.getElementById('city').value,
            zipCode: document.getElementById('zipCode').value,
            selectedBaits: selectedBaits.map(id => baits.find(b => b.id === id).name)
        };

        const webhookUrl = 'https://papacpun8n.ddns.net/webhook/Mariokontakte';

        fetch(webhookUrl, {
            method: 'POST', // Oder 'GET', je nachdem, was dein Webhook erwartet
            headers: {
                'Content-Type': 'application/json', // Wichtig f√ºr JSON-Daten
            },
            body: JSON.stringify(formData), // Daten als JSON-String senden
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            // Wenn der Webhook eine JSON-Antwort zur√ºckgibt, parsen wir sie
            // Andernfalls k√∂nnen wir auch response.text() verwenden oder es weglassen, wenn keine Antwort erwartet wird.
            return response.json(); 
        })
        .then(data => {
            console.log('Webhook Response:', data);
            // Formular und K√∂derauswahl ausblenden
            mainContent.classList.add('hidden'); // Hauptinhalt ausblenden
            // Dankesnachricht anzeigen
            thankYouMessage.style.display = 'block';
            thankYouMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        })
        .catch(error => {
            console.error('There was a problem with the fetch operation:', error);
            alert('Es gab ein Problem beim Senden der Daten. Bitte versuche es sp√§ter noch einmal.');
            // Optional: Fehler-Nachricht f√ºr den Benutzer anzeigen
        });
    });
</script>
</body>
</html>
